---
title: Email & Password
---

import { Step, Steps } from 'fumadocs-ui/components/steps';

import { Tabs, Tab } from 'fumadocs-ui/components/tabs';

Email/password is built-in. Use the UI components and the shared API handler.

<Steps>

### 1) Ensure the API handler is wired

```ts
// App Router: app/api/auth/[[...keyloom]]/route.ts
import { createNextHandler } from '@keyloom/nextjs'
import config from '@/keyloom.config'
export const { GET, POST } = createNextHandler(config)
```

```ts
// Pages Router: pages/api/auth/[...keyloom].ts
import { createPagesApiHandler } from '@keyloom/nextjs'
import config from '@/keyloom.config'
export default createPagesApiHandler(config)
```

### 2) Render forms

<Tabs>
<Tab value="app-router" title="App Router">

```tsx
// app/(auth)/sign-in/page.tsx
import { SignInForm } from '@keyloom/ui/auth'
export default function Page() {
  return <SignInForm />
}
```

```tsx
// app/(auth)/sign-up/page.tsx
import { SignUpForm } from '@keyloom/ui/auth'
export default function Page() {
  return <SignUpForm />
}
```

</Tab>
<Tab value="pages-router" title="Pages Router">

```tsx
// pages/sign-in.tsx
import { SignInForm } from '@keyloom/ui/auth'
export default function Page() {
  return <SignInForm />
}
```

```tsx
// pages/sign-up.tsx
import { SignUpForm } from '@keyloom/ui/auth'
export default function Page() {
  return <SignUpForm />
}
```

</Tab>
</Tabs>

### 3) Forgot / Reset password (optional)

Use `<ForgotPasswordForm />` and `<ResetPasswordForm />` pages from the Tutorials. Tokens are short-lived and single-use.

</Steps>

## Best practices

- Require verified email before sign-in (config and hooks)
- Enforce strong password policy client-side and server-side
- Rate limit credential attempts at middleware (per IP/email)

## Troubleshooting

- CSRF on POST: ensure the API handler is mounted; do not bypass auth endpoints in middleware
- No session after sign-in: check cookie domain/secure flags and `NEXT_PUBLIC_APP_URL`
- Emails not arriving: verify SMTP/API configuration; log emails in development

