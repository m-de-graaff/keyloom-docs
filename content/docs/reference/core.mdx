---
title: "@keyloom/core Reference"
---

import { Callout } from "fumadocs-ui/components/callout";
import { Tabs, Tab } from "fumadocs-ui/components/tabs";

Core library: configuration, session strategies, and runtime flows.

## Installation

```bash
npm install @keyloom/core @keyloom/adapters @prisma/client
```

## Configuration

Key options from `KeyloomConfig`:

- adapter: required (e.g., `PrismaAdapter(new PrismaClient())`)
- session: `{ strategy?: 'database' | 'jwt'; ttlMinutes?: number; rolling?: boolean }`
- jwt: `{ issuer?: string; audience?: string | string[]; accessTTL?: string; refreshTTL?: string; algorithm?: 'EdDSA'|'ES256'; clockSkewSec?: number; includeOrgRoleInAccess?: boolean; jwksPath?: string; keyRotationDays?: number; keyOverlapDays?: number }`
- cookie: `{ sameSite?: 'lax'|'strict'|'none'; domain?: string; maxAgeSec?: number }`
- secrets: `{ authSecret?: string }`
- baseUrl: string

<Callout>
  AUTH_SECRET must be base64url and decode to at least 32 bytes. Prefer database
  sessions by default.
</Callout>

## Example config

```ts
import { PrismaAdapter } from "@keyloom/adapters";
import { PrismaClient } from "@prisma/client";

const db = new PrismaClient();
export default {
  adapter: PrismaAdapter(db),
  baseUrl: process.env.NEXT_PUBLIC_APP_URL!,
  session: { strategy: "database", ttlMinutes: 60, rolling: true },
};
```

## Runtime flows

- register(input)
- login(input)
- logout()
- current session helpers (issue/validate)
- verification tokens (email/password reset)

<Tabs>
<Tab value="register" title="Register">

```ts
import { register } from "@keyloom/core/runtime/register";
await register({ email, password });
```

</Tab>
<Tab value="login" title="Login">

```ts
import { login } from "@keyloom/core/runtime/login";
await login({ email, password });
```

</Tab>
</Tabs>

## Guards & utilities

- csrf guard: `import * as csrf from '@keyloom/core/guard/csrf'`
- rate limit: `import * as rateLimit from '@keyloom/core/guard/rate-limit'`
- jwt helpers: `import * as jwt from '@keyloom/core/jwt'`
- RBAC helpers: `import * as rbac from '@keyloom/core/rbac/*'`
