---
title: Get Started
description: Quick setup guide for integrating Keyloom authentication into your application with CLI, framework integration, and manual setup options
---

import { Steps, Step } from "fumadocs-ui/components/steps";
import { Tabs, Tab } from "fumadocs-ui/components/tabs";
import { Callout } from "fumadocs-ui/components/callout";
import { CodeBlockTabs } from "fumadocs-ui/components/codeblock";

# Get Started with Keyloom

Get up and running with Keyloom authentication in minutes. Choose your preferred setup method based on your project needs and experience level.

<Tabs items={["CLI (Fast)", "Framework Integration", "Manual Setup"]}>
<Tab value="CLI (Fast)">

## CLI Quick Start

The fastest way to get started with Keyloom is using our CLI tool, which handles project setup, configuration, and boilerplate generation.

<Steps>
<Step>

### Install the CLI

<CodeBlockTabs>
```bash tab="npm"
npm install -g @keyloom/cli
```

```bash tab="pnpm"
pnpm add -g @keyloom/cli
```

```bash tab="yarn"
yarn global add @keyloom/cli
```

```bash tab="bun"
bun add -g @keyloom/cli
```

</CodeBlockTabs>

</Step>

<Step>

### Initialize Your Project

Run the initialization command in your project directory:

```bash
keyloom init
```

The CLI will guide you through:

- **Framework selection** (Next.js App Router, Pages Router, or standalone)
- **Database adapter** (Prisma, Drizzle, PostgreSQL, MongoDB, etc.)
- **OAuth providers** (GitHub, Google, Discord, Apple, etc.)
- **Session strategy** (JWT, Database, or Hybrid)
- **RBAC configuration** (Organizations and roles)

</Step>

<Step>

### Configure Environment Variables

The CLI generates a `.env.example` file with all required variables:

```bash title=".env.local"
NEXT_PUBLIC_APP_URL=http://localhost:3000
AUTH_SECRET=your-generated-secret-here
DATABASE_URL=your-database-connection-string

# OAuth Providers (if selected)
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
```

<Callout type="warn">
The `AUTH_SECRET` must be exactly 32 bytes when base64url decoded. You can generate one using the tool below or with this command:

```bash
node -e "console.log(require('crypto').randomBytes(32).toString('base64url'))"
```

</Callout>

<AuthSecretGenerator />

</Step>

<Step>

### Run Database Migrations

If you selected a database adapter, run the migrations:

```bash
keyloom migrate
```

This creates the necessary tables for users, sessions, accounts, and RBAC (if enabled).

</Step>

<Step>

### Start Your Application

Your authentication system is now ready! Start your development server:

<CodeBlockTabs>
```bash tab="npm"
npm run dev
```

```bash tab="pnpm"
pnpm dev
```

```bash tab="yarn"
yarn dev
```

```bash tab="bun"
bun dev
```

</CodeBlockTabs>

Visit `http://localhost:3000/api/auth/signin` to see your authentication pages.

</Step>
</Steps>

### CLI Health Check

Verify your setup with the doctor command:

```bash
keyloom doctor
```

This checks:

- Configuration validity
- Environment variables
- Database connectivity
- Provider configurations
- Security settings

</Tab>

<Tab value="Framework Integration">

## Framework Integration

Set up Keyloom with your preferred framework using our first-class integrations.

### Next.js Integration

<Steps>
<Step>

### Install Packages

<CodeBlockTabs>
```bash tab="npm"
npm install @keyloom/core @keyloom/nextjs
```

```bash tab="pnpm"
pnpm add @keyloom/core @keyloom/nextjs
```

```bash tab="yarn"
yarn add @keyloom/core @keyloom/nextjs
```

```bash tab="bun"
bun add @keyloom/core @keyloom/nextjs
```

</CodeBlockTabs>

Add an adapter and providers:

<CodeBlockTabs>
```bash tab="npm"
npm install @keyloom/adapters @keyloom/providers
```

```bash tab="pnpm"
pnpm add @keyloom/adapters @keyloom/providers
```

```bash tab="yarn"
yarn add @keyloom/adapters @keyloom/providers
```

```bash tab="bun"
bun add @keyloom/adapters @keyloom/providers
```

</CodeBlockTabs>

</Step>

<Step>

### Create Configuration

Create `keyloom.config.ts` in your project root:

```typescript title="keyloom.config.ts"
import { defineKeyloom } from "@keyloom/core";
import { prismaAdapter } from "@keyloom/adapters/prisma";
import github from "@keyloom/providers/github";
import { PrismaClient } from "@prisma/client";

const prisma = new PrismaClient();

export default defineKeyloom({
  baseUrl: process.env.NEXT_PUBLIC_APP_URL!,
  session: {
    strategy: "database", // or "jwt"
    ttlMinutes: 60,
    rolling: true,
  },
  adapter: prismaAdapter(prisma),
  providers: [
    github({
      clientId: process.env.GITHUB_CLIENT_ID!,
      clientSecret: process.env.GITHUB_CLIENT_SECRET!,
    }),
  ],
  rbac: { enabled: false }, // Enable for organizations
  cookie: { sameSite: "lax" },
  secrets: { authSecret: process.env.AUTH_SECRET! },
});
```

</Step>

<Step>

### Set Up API Routes

<Tabs items={["App Router", "Pages Router"]}>
<Tab value="App Router">

Create `app/api/auth/[[...keyloom]]/route.ts`:

```typescript title="app/api/auth/[[...keyloom]]/route.ts"
import { createNextHandler } from "@keyloom/nextjs";
import config from "@/keyloom.config";

export const { GET, POST } = createNextHandler(config);
```

</Tab>
<Tab value="Pages Router">

Create `pages/api/auth/[...keyloom].ts`:

```typescript title="pages/api/auth/[...keyloom].ts"
import type { NextApiRequest, NextApiResponse } from "next";
import { createPagesApiHandler } from "@keyloom/nextjs";
import config from "@/keyloom.config";

export default createPagesApiHandler(config) as (
  req: NextApiRequest,
  res: NextApiResponse
) => void;
```

</Tab>
</Tabs>

</Step>

<Step>

### Add Middleware (Optional)

Create `middleware.ts` for route protection:

```typescript title="middleware.ts"
import { createAuthMiddleware } from "@keyloom/nextjs/middleware";
import config from "@/keyloom.config";

export default createAuthMiddleware(config, {
  publicRoutes: ["/", "/sign-in", "/api/auth/csrf"],
});

export const config = {
  matcher: ["/((?!_next|.*\\.(?:ico|png|jpg|svg|css|js|map)).*)"],
};
```

</Step>
</Steps>

### Using Sessions in Components

```typescript title="components/UserProfile.tsx"
import { getCurrentSession } from "@keyloom/nextjs";
import config from "@/keyloom.config";

export default async function UserProfile() {
  const { session, user } = await getCurrentSession(config);

  if (!session) {
    return <a href="/api/auth/signin">Sign In</a>;
  }

  return (
    <div>
      <p>Welcome, {user?.email}!</p>
      <a href="/api/auth/signout">Sign Out</a>
    </div>
  );
}
```

</Tab>

<Tab value="Manual Setup">

## Manual Setup

For maximum control and understanding, set up Keyloom manually step by step.

<Steps>
<Step>

### Install Core Dependencies

<CodeBlockTabs>
```bash tab="npm"
npm install @keyloom/core
```

```bash tab="pnpm"
pnpm add @keyloom/core
```

```bash tab="yarn"
yarn add @keyloom/core
```

```bash tab="bun"
bun add @keyloom/core
```

</CodeBlockTabs>

</Step>

<Step>

### Choose and Install Adapter

Select a database adapter based on your needs:

<Tabs items={["Prisma", "Drizzle", "PostgreSQL", "MongoDB"]}>
<Tab value="Prisma">

```bash
npm install @keyloom/adapters @prisma/client prisma
```

```typescript title="lib/adapter.ts"
import { prismaAdapter } from "@keyloom/adapters/prisma";
import { PrismaClient } from "@prisma/client";

const prisma = new PrismaClient();

export const adapter = prismaAdapter({
  client: prisma,
});
```

</Tab>
<Tab value="Drizzle">

```bash
npm install @keyloom/adapters drizzle-orm
```

```typescript title="lib/adapter.ts"
import { drizzleAdapter } from "@keyloom/adapters/drizzle";
import { drizzle } from "drizzle-orm/postgres-js";
import postgres from "postgres";

const client = postgres(process.env.DATABASE_URL!);
const db = drizzle(client);

export const adapter = drizzleAdapter({ db });
```

</Tab>
<Tab value="PostgreSQL">

```bash
npm install @keyloom/adapters pg @types/pg
```

```typescript title="lib/adapter.ts"
import { postgresAdapter } from "@keyloom/adapters/postgres";
import { Pool } from "pg";

const pool = new Pool({
  connectionString: process.env.DATABASE_URL,
});

export const adapter = postgresAdapter({ pool });
```

</Tab>
<Tab value="MongoDB">

```bash
npm install @keyloom/adapters mongodb
```

```typescript title="lib/adapter.ts"
import { mongoAdapter } from "@keyloom/adapters/mongo";
import { MongoClient } from "mongodb";

const client = new MongoClient(process.env.DATABASE_URL!);

export const adapter = mongoAdapter({ client });
```

</Tab>
</Tabs>

</Step>

<Step>

### Configure OAuth Providers

Install and configure your chosen providers:

```bash
npm install @keyloom/providers
```

```typescript title="lib/providers.ts"
import github from "@keyloom/providers/github";
import google from "@keyloom/providers/google";

export const providers = [
  github({
    clientId: process.env.GITHUB_CLIENT_ID!,
    clientSecret: process.env.GITHUB_CLIENT_SECRET!,
  }),
  google({
    clientId: process.env.GOOGLE_CLIENT_ID!,
    clientSecret: process.env.GOOGLE_CLIENT_SECRET!,
  }),
];
```

</Step>

<Step>

### Create Keyloom Instance

```typescript title="lib/keyloom.ts"
import { defineKeyloom } from "@keyloom/core";
import { adapter } from "./adapter";
import { providers } from "./providers";

export const keyloom = defineKeyloom({
  baseUrl: process.env.NEXT_PUBLIC_APP_URL!,
  session: {
    strategy: "database",
    ttlMinutes: 60,
    rolling: true,
  },
  adapter,
  providers,
  secrets: {
    authSecret: process.env.AUTH_SECRET!,
  },
});
```

</Step>

<Step>

### Implement Authentication Functions

```typescript title="lib/auth.ts"
import { keyloom } from "./keyloom";

// Register a new user
export async function registerUser(email: string, password: string) {
  return await keyloom.register({ email, password });
}

// Login user
export async function loginUser(email: string, password: string) {
  return await keyloom.login({ email, password });
}

// Get current session
export async function getCurrentUser(sessionToken: string) {
  return await keyloom.getCurrentSession(sessionToken);
}

// Logout user
export async function logoutUser(sessionId: string) {
  return await keyloom.logout(sessionId);
}
```

</Step>
</Steps>

</Tab>
</Tabs>

## Environment Configuration

### Required Environment Variables

```bash title=".env.local"
# Application URL
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Authentication secret (32 bytes, base64url encoded)
AUTH_SECRET=your-32-byte-base64url-secret

# Database connection
DATABASE_URL=postgresql://user:password@localhost:5432/mydb
```

### OAuth Provider Setup

<Tabs items={["GitHub", "Google", "Discord"]}>
<Tab value="GitHub">

1. Go to [GitHub Developer Settings](https://github.com/settings/developers)
2. Create a new OAuth App
3. Set Authorization callback URL to: `http://localhost:3000/api/auth/callback/github`

```bash title=".env.local"
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
```

</Tab>
<Tab value="Google">

1. Go to [Google Cloud Console](https://console.cloud.google.com/)
2. Create OAuth 2.0 credentials
3. Add authorized redirect URI: `http://localhost:3000/api/auth/callback/google`

```bash title=".env.local"
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
```

</Tab>
<Tab value="Discord">

1. Go to [Discord Developer Portal](https://discord.com/developers/applications)
2. Create a new application
3. Set redirect URI to: `http://localhost:3000/api/auth/callback/discord`

```bash title=".env.local"
DISCORD_CLIENT_ID=your-discord-client-id
DISCORD_CLIENT_SECRET=your-discord-client-secret
```

</Tab>
</Tabs>

## Troubleshooting

### Common Issues

<Callout type="error">
**Error: Invalid AUTH_SECRET**

The AUTH_SECRET must be exactly 32 bytes when base64url decoded. Generate a new one:

```bash
node -e "console.log(require('crypto').randomBytes(32).toString('base64url'))"
```

</Callout>

<Callout type="error">
**Error: Database connection failed**

Verify your DATABASE_URL format and ensure the database server is running:

```bash
# PostgreSQL example
DATABASE_URL=postgresql://username:password@localhost:5432/database_name
```

</Callout>

<Callout type="error">
**Error: OAuth callback mismatch**

Ensure your OAuth provider callback URLs match exactly:

- Development: `http://localhost:3000/api/auth/callback/[provider]`
- Production: `https://yourdomain.com/api/auth/callback/[provider]`

</Callout>

### Getting Help

- **Documentation**: Comprehensive guides for all features
- **GitHub Issues**: Report bugs and request features
- **Community Discussions**: Get help from other developers
- **CLI Doctor**: Run `keyloom doctor` for configuration validation

## Next Steps

Now that you have Keyloom set up, explore these advanced features:

- **[RBAC Setup](/docs/rbac)** - Organizations, roles, and permissions
- **[Security Configuration](/docs/security)** - CSRF, rate limiting, and more
- **[Custom Adapters](/docs/adapters)** - Build your own database adapter
- **[Advanced Sessions](/docs/sessions)** - JWT strategies and session management
- **[Deployment Guide](/docs/deployment)** - Production deployment best practices
