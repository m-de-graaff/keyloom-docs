---
title: Keyloom
description: Modern, security-first authentication for Next.js and Node — with sessions (DB or JWT), OAuth providers, RBAC, CSRF, and a great DX.
---

import { Step, Steps } from "fumadocs-ui/components/steps";
import { Tabs, Tab } from "fumadocs-ui/components/tabs";
import { Callout } from "fumadocs-ui/components/callout";
import { Cards, Card } from "fumadocs-ui/components/cards";

Welcome to Keyloom — a TypeScript-first authentication framework for production apps. It provides robust primitives (sessions, JWT, RBAC, CSRF), first-class Next.js support, and a batteries-included CLI and UI components.

<Callout type="info" title="Prerequisites">
  - Set **NEXT_PUBLIC_APP_URL** to your app’s public URL (used for redirects and
  JWKS when using JWT sessions) - Set **AUTH_SECRET** as base64url that decodes
  to at least 32 bytes (run: `keyloom doctor --fix`) - Choose an adapter
  (PrismaAdapter for production; memoryAdapter for demos/tests)
</Callout>

## Quick start

<Steps>

### 1) Install

```bash
pnpm add @keyloom/core @keyloom/nextjs @keyloom/adapters @keyloom/providers
# Optional UI components
pnpm add @keyloom/ui
```

### 2) Configure Keyloom

```ts title="keyloom.config.ts"
import { PrismaAdapter } from "@keyloom/adapters";
import { PrismaClient } from "@prisma/client";
import { github } from "@keyloom/providers";

const db = new PrismaClient();
export default {
  baseUrl: process.env.NEXT_PUBLIC_APP_URL!,
  adapter: PrismaAdapter(db),
  // Use database sessions by default; switch to 'jwt' if you prefer stateless
  // sessionStrategy: 'database' | 'jwt',
  providers: [
    github({
      clientId: process.env.GITHUB_CLIENT_ID!,
      clientSecret: process.env.GITHUB_CLIENT_SECRET!,
    }),
  ],
  cookie: { sameSite: "lax" },
  secrets: { authSecret: process.env.AUTH_SECRET! },
};
```

### 3) Add the API route

<Tabs>
<Tab value="app-router" title="App Router">

```ts title="app/api/auth/[[...keyloom]]/route.ts"
import { createNextHandler } from "@keyloom/nextjs";
import config from "@/keyloom.config";
export const { GET, POST } = createNextHandler(config);
```

</Tab>
<Tab value="pages-router" title="Pages Router">

```ts title="pages/api/auth/[...keyloom].ts"
import { createPagesApiHandler } from "@keyloom/nextjs";
import config from "@/keyloom.config";
export default createPagesApiHandler(config);
```

</Tab>
</Tabs>

### 4) Protect routes

- Middleware (recommended):

```ts title="middleware.ts"
import { createAuthMiddleware } from "@keyloom/nextjs/middleware";
import config from "@/keyloom.config";
export default createAuthMiddleware(config);
```

- Server guard (App Router):

```ts
import { guard } from "@keyloom/nextjs";
export default async function Page() {
  await guard({ visibility: "private", redirectTo: "/sign-in" });
  return <div>Private</div>;
}
```

### 5) Validate your setup

- Run `keyloom doctor` (checks env, cookies, and wiring)
- Test `GET /api/auth/session` and `GET /api/auth/csrf`

</Steps>

## Core API endpoints

<Cards>
  <Card title="Session" href="/docs/reference#session">
    GET /api/auth/session — current user/session
  </Card>
  <Card title="CSRF" href="/docs/reference#csrf">
    GET /api/auth/csrf — CSRF token (double-submit cookie)
  </Card>
  <Card title="Register">
    POST /api/auth/register — email+password register
  </Card>
  <Card title="Login">POST /api/auth/login — email+password login</Card>
  <Card title="Logout">POST /api/auth/logout — end session</Card>
  <Card title="Password Reset">
    POST /api/auth/password/request — begin password reset POST
    /api/auth/password/reset — complete password reset
  </Card>
  <Card title="Email Verification">
    POST /api/auth/email/verify — verify email
  </Card>
  <Card title="OAuth">
    GET/POST /api/auth/oauth/:provider/callback — OAuth callback GET
    /api/auth/oauth/:provider/start — OAuth start
  </Card>
</Cards>

## Learn more

<Cards>
  <Card href="/docs/getting-started" title="Getting Started" />
  <Card href="/docs/integrations/nextjs" title="Next.js Integration" />
  <Card href="/docs/authentication" title="Authentication Providers" />
  <Card href="/docs/concepts" title="Concepts (sessions, JWT, RBAC)" />
  <Card href="/docs/reference" title="API Reference" />
  <Card href="/docs/tutorials" title="Tutorials" />
  <Card href="/docs/troubleshooting" title="Troubleshooting" />
</Cards>

## Migration

<Callout type="warn" title="Migrating from NextAuth">
  See:{" "}
  <a href="/docs/migrate-from-nextauth">Migrate from other auth solutions</a>
</Callout>
