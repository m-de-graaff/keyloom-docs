---
title: Next.js Integration
description: Set up Keyloom with the Next.js App Router.
---

import { Steps, Tabs, Tab, Callout } from "fumadocs-ui/components";

# Next.js Integration

<Steps>
1. Install

```bash
npm install @keyloom/core @keyloom/nextjs @keyloom/providers @keyloom/adapters
```

2. Initialize with the CLI

```bash
npx keyloom init --session database --adapter prisma --providers github --rbac
```

3. API Route handler (App Router)

```ts title="app/api/auth/[...keyloom]/route.ts"
import { createNextHandler } from "@keyloom/nextjs";
import config from "@/keyloom.config";
export const { GET, POST } = createNextHandler(config);
```

4. Middleware

```ts title="middleware.ts"
import { createAuthMiddleware } from "@keyloom/nextjs/middleware";
import routes from "./.keyloom/routes.generated";
import config from "./keyloom.config";
export default createAuthMiddleware(config, { routes });
```

5. Server helpers

```ts
import { getSession } from "@keyloom/nextjs";
const { session, user } = await getSession(config);
```

</Steps>

<Callout>
For JWT strategy, configure issuer and JWKS; see Reference â†’ JWT.
</Callout>
