---
title: Verify 2FA (TOTP challenge)
---

import { Step, Steps } from 'fumadocs-ui/components/steps';

import { Tabs } from 'fumadocs-ui/components/tabs';


Prompt users for their 2FA code during sensitive actions or sign-in challenges.

## Steps

<Steps>

### 1) Ensure API handler is set up

```ts
// Keyloom exposes POST /api/auth/2fa/verify via the handler
```

### 2) Add the 2FA verification page

<Tabs>
<Tabs.Tab title="App Router">

```tsx
// app/(auth)/verify-2fa/page.tsx
"use client"
import { TwoFactorVerify } from '@keyloom/ui/auth'
export const metadata = { title: 'Verify 2FA' }
export default function Page() {
  return (
    <div className="min-h-dvh grid place-items-center p-6">
      <div className="w-full max-w-md p-6 border rounded">
        <TwoFactorVerify />
      </div>
    </div>
  )
}
```

</Tabs.Tab>
<Tabs.Tab title="Pages Router">

```tsx
// pages/verify-2fa.tsx
import dynamic from 'next/dynamic'
const TwoFactorVerify = dynamic(() => import('@keyloom/ui/auth').then(m => m.TwoFactorVerify), { ssr: false })
export default function Page() {
  return (
    <div className="min-h-screen grid place-items-center p-6">
      <div className="w-full max-w-md p-6 border rounded">
        <TwoFactorVerify />
      </div>
    </div>
  )
}
```

</Tabs.Tab>
</Tabs>

### 3) When to use

- As a step after password + 2FA enabled user sign-in
- Before sensitive operations (change email, password, or security settings)

</Steps>

## Troubleshooting

- Repeated failures: check time sync and verify the correct accountâ€™s TOTP app is used.
- 404 on endpoint: ensure the API handler is wired and environment is correct.

